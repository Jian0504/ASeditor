<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>AS在线MarkDown编辑器</title>
    <link rel="stylesheet" href="ASeditor.css">
    <script src="ASeditor.js"></script>
</head>
<body>
<div class="seditor">
    <div class="s-head">
        <nav>

            <a href="javascript:;" title="加粗"><i class="iconfont">&#xe6fe;</i></a>
            <a href="javascript:;" title="斜体"><i class="iconfont">&#xe627;</i></a>
            <a href="javascript:;" title="无序列表"><i class="iconfont">&#xe62b;</i></a>
            <a href="javascript:;" title="有序列表"><i class="iconfont">&#xe67a;</i></a>
            <a href="javascript:;" title="上传图片"><i class="iconfont">&#xe638;</i></a>
            <a href="javascript:;" title="插入代码"><i class="iconfont">&#xe6b9;</i></a>
            <a href="javascript:;" title="查看/预览"><i class="iconfont">&#xe68a;</i></a>
        </nav>
    </div>
    <div class="s-body">
        <div name="" id="ASeditor" contenteditable="true"  onkeydown="onKeyEditor(this)" spellcheck="false"></div>
    </div>
</div>

<div id="ASeditorShow"></div>
</body>
</html>

<script>
    function onKeyEditor(e) {
        // console.log(window.event.keyCode);
        if(window.event.keyCode == 9){
            console.log(window.event.keyCode)
            //IE中阻止函数器默认动作的方式
            try{
                window.event.returnValue = false;
            }catch (e) {
                window.event.preventDefault();
            }
        }
        if(window.event.keyCode == 13){
            console.log($(e).text())
            // addComma(e)
            // try{
            //     window.event.returnValue = false;
            // }catch (e) {
            //     window.event.preventDefault();
            // }
        }
    }
</script>


<script>
    function getCursortPosition (ctrl) {//获取光标位置函数
        var CaretPos = 0;	// IE Support
        if (document.selection) {
            ctrl.focus ();
            var Sel = document.selection.createRange ();
            Sel.moveStart ('character', -ctrl.value.length);
            CaretPos = Sel.text.length;
        }
        // Firefox support
        else if (ctrl.selectionStart || ctrl.selectionStart == '0')
            CaretPos = ctrl.selectionStart;
        return (CaretPos);
    }

    function addComma(obj){
        pos = getCursortPosition(obj);
        // console.log(pos)
        s = obj.value;
        // obj.value = s.substring(0, pos)+"  \n"+s.substring(pos);
    }
</script>

